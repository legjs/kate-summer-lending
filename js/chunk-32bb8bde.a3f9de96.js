(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32bb8bde"],{"4a0f":function(e,t,n){"use strict";n("d19c")},cd6d:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1}},[n("div",{staticClass:"table-operator"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.handleAdd}},[e._v("新增")]),e.selectedRowKeys.length>0?n("a-button",{attrs:{ghost:"",type:"primary",icon:"delete"},on:{click:e.batchDel}},[e._v("批量删除\n    ")]):e._e()],1),n("div",[n("div",{staticClass:"ant-alert ant-alert-info",staticStyle:{"margin-bottom":"16px"}},[n("i",{staticClass:"anticon anticon-info-circle ant-alert-icon"}),e._v("已选择 "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("项  \n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.onClearSelected}},[e._v("清空")])]),n("a-table",{attrs:{columns:e.columns,size:"middle",pagination:!1,dataSource:e.dataSource,loading:e.loading,expandedRowKeys:e.expandedRowKeys,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{expand:e.expandSubmenu,expandedRowsChange:e.handleExpandedRowsChange},scopedSlots:e._u([{key:"action",fn:function(t,a){return n("span",{},[n("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),n("a-divider",{attrs:{type:"vertical"}}),n("a-dropdown",[n("a",{staticClass:"ant-dropdown-link"},[e._v("\n            更多 "),n("a-icon",{attrs:{type:"down"}})],1),n("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDetail(a)}}},[e._v("详情")])]),n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleAddSub(a)}}},[e._v("添加下级")])]),n("a-menu-item",[n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.handleDataRule(a)}}},[e._v("数据规则")])]),n("a-menu-item",[n("a-popconfirm",{attrs:{title:"确定删除吗?"},on:{confirm:function(){return e.handleDelete(a.id)}}},[n("a",[e._v("删除")])])],1)],1)],1)],1)}},{key:"url",fn:function(e){return n("span",{},[n("j-ellipsis",{attrs:{value:e,length:25}})],1)}},{key:"component",fn:function(e){return n("span",{},[n("j-ellipsis",{attrs:{value:e}})],1)}}])})],1),n("permission-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),n("permission-data-rule-list",{ref:"PermissionDataRuleList",on:{ok:e.modalFormOk}})],1)},i=[],o=n("b90e"),s=n("4ec3"),l=n("b65a"),d=n("56cd1"),r=n("d579"),c=[{title:"菜单名称",dataIndex:"name",key:"name"},{title:"菜单类型",dataIndex:"menuType",key:"menuType",customRender:function(e){return 0==e||1==e?"菜单":2==e?"按钮/权限":e}},{title:"icon",dataIndex:"icon",key:"icon"},{title:"组件",dataIndex:"component",key:"component",scopedSlots:{customRender:"component"}},{title:"路径",dataIndex:"url",key:"url",scopedSlots:{customRender:"url"}},{title:"排序",dataIndex:"sortNo",key:"sortNo"},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],u={name:"PermissionListAsync",mixins:[l["a"]],components:{PermissionDataRuleList:d["default"],PermissionModal:o["default"],JEllipsis:r["default"]},data:function(){return{description:"这是菜单管理页面",columns:c,loading:!1,expandedRowKeys:[],url:{list:"/sys/permission/list",delete:"/sys/permission/delete",deleteBatch:"/sys/permission/deleteBatch"}}},methods:{loadData:function(){var e=this;this.loading=!0,Object(s["x"])().then((function(t){if(t.success)return e.dataSource=t.result,e.loadDataByExpandedRows(e.dataSource)})).finally((function(){e.loading=!1}))},expandSubmenu:function(e,t){!e||t.children&&0!==t.children.length||Object(s["y"])({parentId:t.id}).then((function(e){e.success&&(t.children=e.result)}))},loadDataByExpandedRows:function(e){var t=this;return this.expandedRowKeys.length>0?Object(s["z"])({parentIds:this.expandedRowKeys.join(",")}).then((function(n){if(n.success){var a=n.result,i=function e(n){n.forEach((function(n){t.expandedRowKeys.includes(n.id)&&(n.children=a[n.id],e(n.children))}))};i(e)}})):Promise.resolve()},handleDataRule:function(e){this.$refs.PermissionDataRuleList.edit(e)},handleAddSub:function(e){this.$refs.modalForm.title="添加子菜单",this.$refs.modalForm.localMenuType=1,this.$refs.modalForm.disableSubmit=!1,this.$refs.modalForm.edit({status:"1",permsType:"1",route:!0,parentId:e.id})},handleExpandedRowsChange:function(e){this.expandedRowKeys=e}}},p=u,m=(n("4a0f"),n("2877")),f=Object(m["a"])(p,a,i,!1,null,"0796d44f",null);t["default"]=f.exports},d19c:function(e,t,n){},d579:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tooltip",{attrs:{placement:"topLeft"}},[n("template",{slot:"title"},[n("span",[e._v(e._s(e.value))])]),e._v("\n  "+e._s(e._f("ellipsis")(e.value,e.length))+"\n")],2)},i=[],o={name:"JEllipsis",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}},s=o,l=n("2877"),d=Object(l["a"])(s,a,i,!1,null,"4de15389",null);t["default"]=d.exports}}]);